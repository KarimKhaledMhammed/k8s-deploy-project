apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: pet-clinic-app
data:
  application.properties: |
    # JDBC URL pointing to the mysql service in the pet-clinic-db namespace
    spring.datasource.url=jdbc:mysql://mysql-service.pet-clinic-db.svc.cluster.local:3306/petclinic

    # Use environment variables for username/password so secrets stay in Secrets
    spring.datasource.username=${DB_USERNAME}
    spring.datasource.password=${DB_PASSWORD}

    # Expose actuator endpoints for readiness/liveness
    management.endpoints.web.exposure.include=health,info
    management.endpoint.health.probes.enabled=true
    management.health.db.enabled=true
